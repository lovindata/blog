
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../../../2024/06/22/mastering-spark-on-k8s--and-why-i-dumped--kubeflow-spark-operator-formerly-googles-spark-operator/">
      
      
      
      <link rel="icon" href="../../../../assets/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>From AWS to DIY: Building a Cost-Effective üí∏ Home Server with Ubuntu Server, Docker, Portainer & Nginx on a High-Performance Mini PC! üöÄ - LovinData - Simplified Full Stack Data Engineering</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-ZZ86YMNTY8"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-ZZ86YMNTY8",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-ZZ86YMNTY8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
   <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ubuntu-server-docker-portainer-nginx-proxy-manager" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="LovinData - Simplified Full Stack Data Engineering" class="md-header__button md-logo" aria-label="LovinData - Simplified Full Stack Data Engineering" data-md-component="logo">
      
  <img src="../../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LovinData - Simplified Full Stack Data Engineering
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              From AWS to DIY: Building a Cost-Effective üí∏ Home Server with Ubuntu Server, Docker, Portainer & Nginx on a High-Performance Mini PC! üöÄ
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label=""  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label=""  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../../../.." class="md-tabs__link">
        
  
    
  
  Latest posts

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../archive/2025/" class="md-tabs__link">
          
  
  Archive

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../category/backend/" class="md-tabs__link">
          
  
  Categories

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="LovinData - Simplified Full Stack Data Engineering" class="md-nav__button md-logo" aria-label="LovinData - Simplified Full Stack Data Engineering" data-md-component="logo">
      
  <img src="../../../../assets/logo.png" alt="logo">

    </a>
    LovinData - Simplified Full Stack Data Engineering
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Latest posts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2025/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/data-engineering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Engineering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/devops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DevOps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frontend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/scala/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scala
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/typescript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TypeScript
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ubuntu-server-docker-portainer-nginx-proxy-manager" class="md-nav__link">
    <span class="md-ellipsis">
      ü§î Ubuntu Server, Docker, Portainer &amp; Nginx Proxy Manager?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-bootable-usb-key" class="md-nav__link">
    <span class="md-ellipsis">
      üîå Create a Bootable USB Key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-ubuntu-server-os" class="md-nav__link">
    <span class="md-ellipsis">
      üêß Install Ubuntu Server OS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-docker-portainer-and-nginx-proxy-manager" class="md-nav__link">
    <span class="md-ellipsis">
      üêã Set Up Docker, Portainer, and Nginx Proxy Manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expose-your-services-to-the-internet-securely" class="md-nav__link">
    <span class="md-ellipsis">
      üåê Expose Your Services to the Internet Securely
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-use-case-open-webui-and-ollama-setup" class="md-nav__link">
    <span class="md-ellipsis">
      üéØ Example Use Case: Open WebUI and Ollama Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      üîÆ What's next?
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../.." class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"/></svg>
                        <time datetime="2025-01-01 00:00:00+00:00" class="md-ellipsis">January 1, 2025</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"/></svg>
                          <span class="md-ellipsis">
                            in
                            
                              <a href="../../../../category/linux/">Linux</a>, 
                              <a href="../../../../category/docker/">Docker</a>, 
                              <a href="../../../../category/nginx/">Nginx</a>, 
                              <a href="../../../../category/devops/">DevOps</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7z"/></svg>
                          <span class="md-ellipsis">
                            
                              13 min read
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        


  <h1>From AWS to DIY: Building a Cost-Effective üí∏ Home Server with Ubuntu Server, Docker, Portainer & Nginx on a High-Performance Mini PC! üöÄ</h1>

<p>As a software engineer, I‚Äôve relied on <a href="https://aws.amazon.com/ec2/?nc2=h_ql_prod_cp_ec2">AWS for cloud computing</a> for some time, but the rising costs finally pushed me to rethink things üí∏. During Black Friday, I jumped on a deal I couldn‚Äôt resist üéâ and built a home setup around a <a href="https://www.gmktec.com/?spm=..product_397345ec-b381-4f76-83dc-9cb6156546ee.header_1.1&amp;spm_prev=..collection_72f4817e-5a65-4acf-bdbd-06cc49c42783.header_1.1">GMKtec mini PC</a> with an <a href="https://www.gmktec.com/products/amd-ryzen-7-8845hs-mini-pc-nucbox-k8-plus?spm=..collection_72f4817e-5a65-4acf-bdbd-06cc49c42783.header_1.1&amp;spm_prev=..product_fcda073f-26cd-4db0-8dc4-22bf93d4f8f7.header_1.1">AMD Ryzen 7 8845HS</a>, paired with 2 x <a href="https://www.crucial.fr/memory/ddr5/CT48G56C46S5">48GB of DDR5 5600MHz Crucial RAM</a> and two <a href="https://www.samsung.com/fr/memory-storage/nvme-ssd/990-pro-4tb-nvme-pcie-gen-4-mz-v9p4t0bw/">4TB Samsung 990 PRO PCIe 4.0 NVMe M.2 SSDs</a>. The whole setup cost me ‚Ç¨1,100 (about $1,200 USD) and runs at only 35W ‚ö°‚Äîthat‚Äôs <strong>roughly ‚Ç¨4.30 ($4.60 USD)</strong> a month in electricity here in France üá´üá∑. Compare that to the <strong>$517 per month</strong> I‚Äôd pay to run an <a href="https://aws.amazon.com/fr/ec2/pricing/on-demand/">AWS EC2 m8g.4xlarge instance</a>. Now, I‚Äôve got <strong>16 CPUs (8 cores, 16 threads) üíª, 96GB of speedy RAM ‚öôÔ∏è, and 8TB of PCIe 4.0 NVMe storage üíæ</strong> for demanding workloads. It‚Äôs a massive money-saver üí∞ and the perfect base for a home lab running <a href="https://ubuntu.com/download/server">Ubuntu Server üêß</a>. Tools like <a href="https://www.portainer.io/">Portainer</a> make container management easy üõ†Ô∏è, and <a href="https://nginxproxymanager.com/">Nginx Proxy Manager</a> simplifies reverse proxy configurations üîÑ. If cloud costs are draining your budget, making the switch is well worth it üöÄ!</p>
<!-- more -->

<p><a class="glightbox" href="../../../../4/image.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Ubuntu Server, Docker, Portainer &amp; Nginx" src="../../../../4/image.png" /></a></p>
<h2 id="ubuntu-server-docker-portainer-nginx-proxy-manager">ü§î Ubuntu Server, Docker, Portainer &amp; Nginx Proxy Manager?</h2>
<p>What are Ubuntu Server, Docker, Portainer, and Nginx Proxy Manager? Quickly:</p>
<ul>
<li><a href="https://ubuntu.com/download/server"><strong>üêß Ubuntu Server</strong></a>: Ubuntu Server is a robust and popular <a href="https://www.linux.org/">Linux-based operating system</a> designed for server environments, providing the foundation for building reliable and secure web applications and services.</li>
<li><a href="https://www.docker.com/"><strong>üê≥ Docker</strong></a>: Docker is a platform that allows developers to automate the deployment of applications inside lightweight, portable <a href="https://www.docker.com/resources/what-container/">containers</a>, simplifying environment management and ensuring consistency across different systems.</li>
<li><a href="https://www.portainer.io/"><strong>üõ†Ô∏è Portainer</strong></a>: Portainer is a simple and easy-to-use management interface for Docker, providing a graphical dashboard for managing containers, <a href="https://hub.docker.com/search">images</a>, and <a href="https://docs.docker.com/engine/storage/volumes/">volumes</a>, which helps streamline container operations for developers.</li>
<li><a href="https://nginxproxymanager.com/"><strong>üîÑ Nginx Proxy Manager</strong></a>: Nginx Proxy Manager is an intuitive tool for managing <a href="https://nginx.org/en/">Nginx</a> proxy configurations, allowing users to easily set up <a href="https://www.cloudflare.com/learning/cdn/glossary/reverse-proxy/">reverse proxies</a>, <a href="https://www.cloudflare.com/learning/ssl/what-is-an-ssl-certificate/">SSL certificates</a>, and routing to their applications, all through a user-friendly interface.</li>
</ul>
<p>At the end of this guide, you should be able to set up a home server environment with Ubuntu Server, Docker, Portainer, and Nginx Proxy Manager, enabling efficient management of containers and web traffic. Let's get started!</p>
<h2 id="create-a-bootable-usb-key">üîå Create a Bootable USB Key</h2>
<p>In this part, we are going to create a bootable USB key using Rufus.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Create a bootable USB key with Rufus" src="../../../../4/image-1.png" /></a>
  <figcaption>Create a bootable USB key with Rufus</figcaption>
</figure>
<p>The goal is to set up a USB drive that will allow us to easily install Ubuntu Server on a system.</p>
<p>Go to <a href="https://rufus.ie/en/">rufus.ie</a> to download and install Rufus.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Install Rufus" src="../../../../4/image-2.png" /></a>
  <figcaption>Install Rufus</figcaption>
</figure>
<p>Do the same for Ubuntu Server at <a href="https://ubuntu.com/download/server">ubuntu.com/download/server</a>.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Download Ubuntu Server ISO" src="../../../../4/image-3.png" /></a>
  <figcaption>Download Ubuntu Server ISO</figcaption>
</figure>
<p>Now it's time to create a bootable USB key with the Ubuntu Server ISO. Plug in your USB key, open Rufus, and for <code>Boot selection</code>, select the downloaded Ubuntu Server ISO. Here‚Äôs what your configuration should look like:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Rufus Configuration" src="../../../../4/image-4.png" /></a>
  <figcaption>Rufus Configuration</figcaption>
</figure>
<p>Click on <code>START</code>, and now all you have to do is wait üëç. Congratulations, you've set up a bootable USB key! Let's use it to install Ubuntu Server on our machine!</p>
<h2 id="install-ubuntu-server-os">üêß Install Ubuntu Server OS</h2>
<p>The goal now is to use the USB key containing our Ubuntu Server ISO to install Ubuntu Server on our machine.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Install Ubuntu Server OS" src="../../../../4/image-5.png" /></a>
  <figcaption>Install Ubuntu Server OS</figcaption>
</figure>
<p>The ultimate goal is to have a machine that we can connect to via <a href="https://www.techtarget.com/searchsecurity/definition/Secure-Shell">SSH</a>, just like one rented from any <a href="https://cloud.google.com/learn/what-is-a-cloud-service-provider">cloud provider</a> üòâ.</p>
<p>Start by plugging the USB key, then turn ON the machine and open the <a href="https://en.wikipedia.org/wiki/BIOS">BIOS</a>. To open the BIOS, restart your PC and press the designated key (commonly F2, F12, Delete, or Esc), which depends on your PC's manufacturer.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-6.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="The USB key is set as the first boot option" src="../../../../4/image-6.png" /></a>
  <figcaption>The USB key is set as the first boot option</figcaption>
</figure>
<p>As explained on the screen, <strong>the USB key is set as the first boot option</strong>. Then restart the machine, you should be welcomed with the choice: <code>Try or install Ubuntu Server</code>.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-7.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Try or install Ubuntu Server" src="../../../../4/image-7.png" /></a>
  <figcaption>Try or install Ubuntu Server</figcaption>
</figure>
<p>Select this choice, and then you will follow a series of instructions. Here are some tricky parts (obvious parts will not be detailed; regarding the few screens that will appear, I am not the original author. If you wish for a more detailed explanation, please check out <a href="https://www.youtube.com/watch?v=zs2zdVPwZ7E&amp;t=753s">SavvyNik's video</a> üëç).</p>
<ul>
<li>Choose the basic installation.</li>
</ul>
<figure>
  <a class="glightbox" href="../../../../4/image-8.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Choose the basic installation" src="../../../../4/image-8.png" /></a>
  <figcaption>Choose the basic installation</figcaption>
</figure>
<ul>
<li>Set up the internet connection via Ethernet or WiFi.</li>
</ul>
<figure>
  <a class="glightbox" href="../../../../4/image-9.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Network connections" src="../../../../4/image-9.png" /></a>
  <figcaption>Network connections</figcaption>
</figure>
<p>On your side, you may have more interfaces. It can also be via WiFi üëç! The important thing is to have one set up because <strong>internet will be needed</strong> for <strong>package downloads and updates</strong>, and, of course, for the <strong>SSH connection through the home network</strong>.</p>
<ul>
<li><code>Use an entire disk</code> and <code>Set up this disk as LVM group</code>.</li>
</ul>
<figure>
  <a class="glightbox" href="../../../../4/image-10.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Guided storage configuration" src="../../../../4/image-10.png" /></a>
  <figcaption>Guided storage configuration</figcaption>
</figure>
<ul>
<li>Set the storage configuration to utilize all the disk space.</li>
</ul>
<p>For the storage configuration part, by default, it does not utilize all the disk space. You can see this in the <code>free space</code> field in the <code>DEVICE</code> section:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-11.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Storage configuration - Before" src="../../../../4/image-11.png" /></a>
  <figcaption>Storage configuration - Before</figcaption>
</figure>
<p>So the goal is to <strong>allocate all this unconfigured free space to <code>ubuntu-lv</code></strong>. This will allow you to utilize all your disk space for your files, packages, etc.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-12.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Storage configuration - Editing logical volumne ubuntu-lv of ubuntu-vg" src="../../../../4/image-12.png" /></a>
  <figcaption>Storage configuration - Editing logical volumne ubuntu-lv of ubuntu-vg</figcaption>
</figure>
<figure>
  <a class="glightbox" href="../../../../4/image-13.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Storage configuration - After" src="../../../../4/image-13.png" /></a>
  <figcaption>Storage configuration - After</figcaption>
</figure>
<ul>
<li>Install OpenSSH server.</li>
</ul>
<figure>
  <a class="glightbox" href="../../../../4/image-14.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Install OpenSSH server" src="../../../../4/image-14.png" /></a>
  <figcaption>Install OpenSSH server</figcaption>
</figure>
<ul>
<li>Regarding <code>Featured Server Snaps</code>, do not select anything and select <code>Done</code>; it will start installing packages, be patient, and then just click <code>Reboot Now</code>.</li>
</ul>
<figure>
  <a class="glightbox" href="../../../../4/image-15.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Install complete!" src="../../../../4/image-15.png" /></a>
  <figcaption>Install complete!</figcaption>
</figure>
<ul>
<li>You can now login!</li>
</ul>
<p>Let it boot, and you should encounter an error because the USB key is still plugged in, and the server tries to boot from it. Turn off the server, <strong>remove the USB key</strong>, and then <strong>boot up the server</strong>. If you end up with the following screen, congratulations, you've <strong>successfully installed Ubuntu Server üòç</strong>!</p>
<figure>
  <a class="glightbox" href="../../../../4/image-16.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="You can now login!" src="../../../../4/image-16.png" /></a>
  <figcaption>You can now login!</figcaption>
</figure>
<p>Final thing, let's check if we can connect to the server from another machine via SSH. First, find the server's IP by logging in and running the following command on the server:</p>
<div class="language-bash highlight"><span class="filename">From server</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>ip<span class="w"> </span>a
</span></code></pre></div>
<p>It should give you a list of interfaces. Find the one that has an <code>inet</code> address formatted as <code>192.168.1.X</code>:</p>
<div class="language-bash highlight"><span class="filename">From server</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>...
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="m">4</span>:<span class="w"> </span>wlp4s0:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span>link/ether<span class="w"> </span>xx:xx:xx:xx:xx:xx<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.1.X/24<span class="w"> </span>metric<span class="w"> </span><span class="m">600</span><span class="w"> </span>brd<span class="w"> </span><span class="m">192</span>.168.1.255<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>dynamic<span class="w"> </span>wlp4s0
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">       </span>valid_lft<span class="w"> </span>38554sec<span class="w"> </span>preferred_lft<span class="w"> </span>38554sec
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span>inet6<span class="w"> </span>xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx/64<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>dynamic<span class="w"> </span>mngtmpaddr<span class="w"> </span>noprefixroute
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">       </span>valid_lft<span class="w"> </span>86165sec<span class="w"> </span>preferred_lft<span class="w"> </span>86165sec
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span>inet6<span class="w"> </span>fe80::xxxx:xxxx:xxxx:xxxx/64<span class="w"> </span>scope<span class="w"> </span>link
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>...
</span></code></pre></div>
<p>Let's connect via SSH.</p>
<div class="language-bash highlight"><span class="filename">From work machine</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ssh<span class="w"> </span>myuser@192.168.1.X
</span></code></pre></div>
<p>If it connects:</p>
<div class="language-bash highlight"><span class="filename">From work machine</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>...
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>Last<span class="w"> </span>login:<span class="w"> </span>Mon<span class="w"> </span>Jan<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">05</span>:49:37<span class="w"> </span><span class="m">2025</span><span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.Y
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>myuser@myserver:~$
</span></code></pre></div>
<p>Then, congratulations! You've successfully set up a server similar to the ones you can rent from AWS or any other cloud provider ü§©. All the following commands will be executed from the work machine on behalf of the server via SSH from now on!</p>
<h2 id="set-up-docker-portainer-and-nginx-proxy-manager">üêã Set Up Docker, Portainer, and Nginx Proxy Manager</h2>
<p>Now, it's time to set up all the necessary tools to deploy, maintain, and expose our services/applications: Docker, Portainer, and Nginx Proxy Manager.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-17.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Docker, Portainer, and Nginx Proxy Manager" src="../../../../4/image-17.png" /></a>
  <figcaption>Docker, Portainer, and Nginx Proxy Manager</figcaption>
</figure>
<p>Let's first install Docker (<a href="https://docs.docker.com/engine/install/ubuntu/#installation-methods">official link</a>, if necessary):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Add Docker&#39;s official GPG key</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>ca-certificates<span class="w"> </span>curl
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>sudo<span class="w"> </span>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0755</span><span class="w"> </span>-d<span class="w"> </span>/etc/apt/keyrings
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>sudo<span class="w"> </span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://download.docker.com/linux/ubuntu/gpg<span class="w"> </span>-o<span class="w"> </span>/etc/apt/keyrings/docker.asc
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>sudo<span class="w"> </span>chmod<span class="w"> </span>a+r<span class="w"> </span>/etc/apt/keyrings/docker.asc
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="c1"># Add the repository to Apt sources</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="nb">echo</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">  </span><span class="s2">&quot;deb [arch=</span><span class="k">$(</span>dpkg<span class="w"> </span>--print-architecture<span class="k">)</span><span class="s2"> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="s2">  </span><span class="k">$(</span>.<span class="w"> </span>/etc/os-release<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$VERSION_CODENAME</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2"> stable&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">  </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/docker.list<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Install Docker</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>docker-ce<span class="w"> </span>docker-ce-cli<span class="w"> </span>containerd.io<span class="w"> </span>docker-buildx-plugin<span class="w"> </span>docker-compose-plugin
</span></code></pre></div>
<p>You can verify the Docker installation using the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>sudo<span class="w"> </span>docker<span class="w"> </span>version
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>version
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Client:<span class="w"> </span>Docker<span class="w"> </span>Engine<span class="w"> </span>-<span class="w"> </span>Community
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w"> </span>Version:<span class="w">           </span><span class="m">27</span>.4.1
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w"> </span>API<span class="w"> </span>version:<span class="w">       </span><span class="m">1</span>.47
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w"> </span>Go<span class="w"> </span>version:<span class="w">        </span>go1.22.10
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w"> </span>Git<span class="w"> </span>commit:<span class="w">        </span>b9d17ea
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w"> </span>Built:<span class="w">             </span>Tue<span class="w"> </span>Dec<span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">15</span>:45:46<span class="w"> </span><span class="m">2024</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w"> </span>OS/Arch:<span class="w">           </span>linux/amd64
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w"> </span>Context:<span class="w">           </span>default
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>Server:<span class="w"> </span>Docker<span class="w"> </span>Engine<span class="w"> </span>-<span class="w"> </span>Community
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w"> </span>Engine:
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">  </span>Version:<span class="w">          </span><span class="m">27</span>.4.1
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">  </span>API<span class="w"> </span>version:<span class="w">      </span><span class="m">1</span>.47<span class="w"> </span><span class="o">(</span>minimum<span class="w"> </span>version<span class="w"> </span><span class="m">1</span>.24<span class="o">)</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">  </span>Go<span class="w"> </span>version:<span class="w">       </span>go1.22.10
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">  </span>Git<span class="w"> </span>commit:<span class="w">       </span>c710b88
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">  </span>Built:<span class="w">            </span>Tue<span class="w"> </span>Dec<span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">15</span>:45:46<span class="w"> </span><span class="m">2024</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">  </span>OS/Arch:<span class="w">          </span>linux/amd64
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">  </span>Experimental:<span class="w">     </span><span class="nb">false</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="w"> </span>containerd:
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="w">  </span>Version:<span class="w">          </span><span class="m">1</span>.7.24
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">  </span>GitCommit:<span class="w">        </span>88bf19b2105c8b17560993bee28a01ddc2f97182
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w"> </span>runc:
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">  </span>Version:<span class="w">          </span><span class="m">1</span>.2.2
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">  </span>GitCommit:<span class="w">        </span>v1.2.2-0-g7cb3632
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="w"> </span>docker-init:
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">  </span>Version:<span class="w">          </span><span class="m">0</span>.19.0
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">  </span>GitCommit:<span class="w">        </span>de40ad0
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>Docker<span class="w"> </span>Compose<span class="w"> </span>version<span class="w"> </span>v2.32.1
</span></code></pre></div>
<p>Then install Portainer (<a href="https://docs.portainer.io/start/install-ce/server/docker/linux#deployment">official link</a>, if necessary):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Create Portainer volume</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>sudo<span class="w"> </span>docker<span class="w"> </span>volume<span class="w"> </span>create<span class="w"> </span>portainer_data
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c1"># Pull &amp; Run Portainer</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8000</span>:8000<span class="w"> </span>-p<span class="w"> </span><span class="m">9443</span>:9443<span class="w"> </span>--name<span class="w"> </span>portainer<span class="w"> </span>--restart<span class="o">=</span>always<span class="w"> </span>-v<span class="w"> </span>/var/run/docker.sock:/var/run/docker.sock<span class="w"> </span>-v<span class="w"> </span>portainer_data:/data<span class="w"> </span>portainer/portainer-ce:2.25.1
</span></code></pre></div>
<p>Once completed, you can <strong>navigate to https://192.168.1.X:9443</strong>. You should be prompted to <strong>create the administrator account</strong>. Once completed and logged in, the following screen should be presented to you:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-18.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Portainer ready!" src="../../../../4/image-18.png" /></a>
  <figcaption>Portainer ready!</figcaption>
</figure>
<p>Congratulations, you've successfully installed Portainer! You can now deploy, maintain, and monitor containerized applications through a Web UI.</p>
<p>Finally, let's install Nginx Proxy Manager (<a href="https://nginxproxymanager.com/guide/#quick-setup">official link</a>, if necessary):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Create Nginx Proxy Manager volumes</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>sudo<span class="w"> </span>docker<span class="w"> </span>volume<span class="w"> </span>create<span class="w"> </span>nginx_proxy_manager_data
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>sudo<span class="w"> </span>docker<span class="w"> </span>volume<span class="w"> </span>create<span class="w"> </span>nginx_proxy_manager_etc_letsencrypt
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="c1"># Pull &amp; Run Nginx Proxy Manager</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">80</span>:80<span class="w"> </span>-p<span class="w"> </span><span class="m">443</span>:443<span class="w"> </span>-p<span class="w"> </span><span class="m">81</span>:81<span class="w"> </span>--name<span class="w"> </span>nginx_proxy_manager<span class="w"> </span>--restart<span class="o">=</span>always<span class="w"> </span>-v<span class="w"> </span>nginx_proxy_manager_data:/data<span class="w"> </span>-v<span class="w"> </span>nginx_proxy_manager_etc_letsencrypt:/etc/letsencrypt<span class="w"> </span>jc21/nginx-proxy-manager:2.12.2
</span></code></pre></div>
<p>Once completed, you can <strong>navigate to http://192.168.1.X:81</strong>. The login and password are <code>admin@example.com</code> and <code>changeme</code>. Once logged in, you will be prompted to change these parameters and will be welcomed with the following screen:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-19.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Nginx Proxy Manager ready!" src="../../../../4/image-19.png" /></a>
  <figcaption>Nginx Proxy Manager ready!</figcaption>
</figure>
<p>Congratulation! you've successfully installed Nginx Proxy Manager! ü§ó</p>
<h2 id="expose-your-services-to-the-internet-securely">üåê Expose Your Services to the Internet Securely</h2>
<p>In this section, we are going to expose Nginx Proxy Manager and Portainer to the outside world. The goal is to be able to manage, deploy, and maintain our services from anywhere! In this part, depending on your ISP and domain name provider, it's highly likely that you do not have exactly the same screens.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-20.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Exposing Nginx Proxy Manager and Portainer to the outside world" src="../../../../4/image-20.png" /></a>
  <figcaption>Exposing Nginx Proxy Manager and Portainer to the outside world</figcaption>
</figure>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Beware, exposing Nginx Proxy Manager and Portainer allows people to attempt to <strong>crack your login/password</strong>. If they succeed, it means they have <strong>control over the deployed applications</strong>. So, if working from home is the only thing you do, it might be wise not to expose these two services and to only access them from your home network!</p>
</div>
<p>Let's start by <strong>forwarding ports 80 and 443 requests from our ISP router to our server's ports 80 and 443</strong>:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-21.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Forwarding ports 80 and 443 requests" src="../../../../4/image-21.png" /></a>
  <figcaption>Forwarding ports 80 and 443 requests</figcaption>
</figure>
<p>Let's now <strong>get the CNAME or router's Internet IP</strong>:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-22.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Getting CNAME or router Internet IP" src="../../../../4/image-22.png" /></a>
  <figcaption>Forwarding ports 80 and 443 requests</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also go to sites like <a href="https://www.whatismyip.com/">whatismyip.com</a> to get your IP.</p>
</div>
<p>Now let's <strong>buy a domain name</strong>. In my case I choosed <a href="https://www.namecheap.com">namecheap.com</a>. After buying the domain name, let's <strong>configure it to be routed to our ISP router</strong>.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-23.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Domain routing" src="../../../../4/image-23.png" /></a>
  <figcaption>Domain routing</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also route to your ISP router using the IP address instead of the CNAME.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Host means the subdomain name. For example, with a host of <code>nginx</code>, it will route the domain <code>nginx.mydomain.topdomain</code> to your ISP router.</p>
</div>
<p>Let's go back to our home network and <strong>configure Nginx to allow requests from these domains to our services</strong>. We will use the example of Nginx Proxy Manager itself:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-24.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Configure your &quot;Let's Encrypt&quot; SSL certificate for your domain" src="../../../../4/image-24.png" /></a>
  <figcaption>Configure your "Let's Encrypt" SSL certificate for your domain</figcaption>
</figure>
<figure>
  <a class="glightbox" href="../../../../4/image-25.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="&quot;Add Proxy Host&quot; to the corresponding service with &quot;Force SSL&quot; and the corresponding SSL certificate" src="../../../../4/image-25.png" /></a>
  <figcaption>"Add Proxy Host" to the corresponding service with "Force SSL" and the corresponding SSL certificate</figcaption>
</figure>
<p>The <strong>same steps can be applied to Portainer</strong>, but be sure to use <code>https</code> as the <code>Scheme</code> when adding the proxy host, because the Portainer service uses https by default.</p>
<p><strong>Going to "nginx.mydomain.topdomain" and "portainer.mydomain.topdomain", you should be able to access</strong> your two services! Congratulations, you've learned how to expose your services to the Internet! üéâ</p>
<h2 id="example-use-case-open-webui-and-ollama-setup">üéØ Example Use Case: Open WebUI and Ollama Setup</h2>
<p>This section aims to demonstrate how to properly install a stack of containers for a given application and expose it to the Internet. <a href="https://en.wikipedia.org/wiki/Large_language_model">LLMs</a> are hot topics nowadays, so let's use the <a href="https://openwebui.com/">Open WebUI</a> and <a href="https://ollama.com/">Ollama</a> stack as an example.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-26.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Open WebUI and Ollama Setup" src="../../../../4/image-26.png" /></a>
  <figcaption>Open WebUI and Ollama Setup</figcaption>
</figure>
<p>Let's start by running the LLM container stack on our server. Here are the steps:</p>
<ul>
<li>Navigate to the Portainer home page.</li>
<li>Select the <code>Local</code> environment, go to <code>Stacks</code>, and click on <code>Add stack</code>.</li>
<li>Input a <code>Name</code> for the stack, for example, <code>llm</code>.</li>
<li>Select <code>Web editor</code> and paste the following Docker Compose file.</li>
</ul>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="c1"># https://github.com/open-webui/open-webui</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="nt">openwebui</span><span class="p">:</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/open-webui/open-webui:v0.5.4</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${OPENWEBUI_PORT}:8080</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">      </span><span class="nt">OLLAMA_API_BASE_URL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://ollama:${OLLAMA_PORT}</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openwebui_app_backend_data:/app/backend/data</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">    </span><span class="nt">healthcheck</span><span class="p">:</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">      </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;curl</span><span class="nv"> </span><span class="s">-f</span><span class="nv"> </span><span class="s">http://localhost:8080&quot;</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">      </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">      </span><span class="nt">ollama</span><span class="p">:</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">        </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service_healthy</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">  </span><span class="c1"># https://hub.docker.com/r/ollama/ollama/tags</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">  </span><span class="nt">ollama</span><span class="p">:</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama/ollama:0.5.4</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${OLLAMA_PORT}:11434</span>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ollama_root_ollama:/root/.ollama</span>
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a><span class="w">    </span><span class="nt">healthcheck</span><span class="p">:</span>
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a><span class="w">      </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ollama</span><span class="nv"> </span><span class="s">--version</span><span class="nv"> </span><span class="s">&amp;&amp;</span><span class="nv"> </span><span class="s">ollama</span><span class="nv"> </span><span class="s">ps</span><span class="nv"> </span><span class="s">||</span><span class="nv"> </span><span class="s">exit</span><span class="nv"> </span><span class="s">1&quot;</span><span class="w"> </span><span class="c1"># https://github.com/ollama/ollama/issues/1378#issuecomment-2436650823</span>
</span><span id="__span-10-31"><a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id="__span-10-32"><a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
</span><span id="__span-10-33"><a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a><span class="w">      </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-10-34"><a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a>
</span><span id="__span-10-35"><a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-10-36"><a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a><span class="w">  </span><span class="nt">openwebui_app_backend_data</span><span class="p">:</span>
</span><span id="__span-10-37"><a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a><span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>
</span><span id="__span-10-38"><a id="__codelineno-10-38" name="__codelineno-10-38" href="#__codelineno-10-38"></a><span class="w">  </span><span class="nt">ollama_root_ollama</span><span class="p">:</span>
</span><span id="__span-10-39"><a id="__codelineno-10-39" name="__codelineno-10-39" href="#__codelineno-10-39"></a><span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>
</span></code></pre></div>
<ul>
<li>In the <code>Environment variables</code> section, add the following environment variables: <code>OPENWEBUI_PORT -&gt; 11435</code> and <code>OLLAMA_PORT -&gt; 11434</code>.</li>
</ul>
<p>You should end up with a configuration that looks like this:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-27.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Configuring the Open WebUI and Ollama stack" src="../../../../4/image-27.png" /></a>
  <figcaption>Configuring the Open WebUI and Ollama stack</figcaption>
</figure>
<p>Let's now expose our application to the outside world. To be precise, it means exposing the Open WebUI service. This part is identical to when Nginx Proxy Manager and Portainer were exposed, so I invite you to <strong>check the <a href="#-expose-your-services-to-the-internet-securely">previous part</a></strong>. The important part is to <strong>expose only the Open WebUI and enable <code>Websockets Support</code></strong> because text writing on the fly is done through a websocket. After that, you should be able to <strong>navigate to 'llm.mydomain.topdomain'</strong>, and by <strong>configuring your admin account (mandatory on first page load)</strong>, you should end up on the following page:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-28.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Open WebUI" src="../../../../4/image-28.png" /></a>
  <figcaption>Open WebUI</figcaption>
</figure>
<p>Let's now download the latest <a href="https://ollama.com/library/phi4">Phi-4</a> with its 14 billion parameters, rumored to rival <a href="https://openai.com/index/gpt-4o-mini-advancing-cost-efficient-intelligence/">OpenAI's GPT-4o mini</a>, which everyone is talking about. You can also try other LLMs instead; models are available in the <a href="https://ollama.com/search">Ollama Models section</a>.</p>
<figure>
  <a class="glightbox" href="../../../../4/image-29.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="The Phi-4 model" src="../../../../4/image-29.png" /></a>
  <figcaption>The Phi-4 model</figcaption>
</figure>
<figure>
  <a class="glightbox" href="../../../../4/image-30.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Downloading the Phi-4 model" src="../../../../4/image-30.png" /></a>
  <figcaption>Downloading the Phi-4 model</figcaption>
</figure>
<p>Here is an example result of prompting:</p>
<figure>
  <a class="glightbox" href="../../../../4/image-31.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="An example of a prompt result" src="../../../../4/image-31.png" /></a>
  <figcaption>An example of a prompt result</figcaption>
</figure>
<p>The latest Phi is running on our server, though it's currently best suited for background tasks due to its slower performance. üéâ Congratulations! You've successfully self-hosted your own private LLM platform! üöÄ</p>
<h2 id="whats-next">üîÆ What's next?</h2>
<p>My thoughts are that <strong>self-hosting is ideal for ephemeral computation or data</strong>. It's great because, as we can see, it‚Äôs more than doable, and when compared to cloud prices, it's less costly. However, running a full business on a self-hosted lab isn't ideal. My home isn‚Äôt "secure". So, if <strong>user data is critical to the application, I would rent persistent services like <a href="https://aws.amazon.com/rds/">RDS</a>, <a href="https://aws.amazon.com/s3/">S3</a>, etc</strong>. But for all the <strong>application logic and computation, since it's ephemeral</strong>, I would go the <strong>self-hosting route</strong>.</p>
<p>Regarding the technical/hardware side, I might buy another mini PC to set up a <a href="https://kubernetes.io/">K8S</a> cluster. Alternatively, I‚Äôm considering the new <a href="https://www.intel.com/content/www/us/en/newsroom/news/intel-launches-arc-b-series-graphics-cards.html">Intel Arc Battlemage GPUs</a> that just got released. The <a href="https://www.gmktec.com/collections/amd-mini-pc/products/amd-ryzen-7-8845hs-mini-pc-nucbox-k8-plus?spm=..collection_48a90fc4-e985-456a-b599-fb6d33eaa7be.collection_1.3&amp;spm_prev=..index.header_1.1">GMKTec AMD Ryzen 7 8845HS Mini PC‚ÄîNucBox K8 Plus</a> I have even has an <a href="https://www.delock.com/infothek/OCuLink/oculink_e.html">Oculink</a> port, h√©h√©! Or maybe I‚Äôll go for both options‚Äîimagine a <a href="https://kubernetes.io/docs/tasks/manage-gpus/scheduling-gpus/">K8S cluster with GPU enabled</a> on each node ü§§. We‚Äôll see!</p>
<p>I try to write monthly on the <a href="https://lovindata.github.io/blog/">LovinData Blog</a> and on <a href="https://medium.com/@jamesjg">Medium</a>, and like to give back the knowledge I've learned. So don't hesitate to reach out; I'm always available to chat about nerdy stuff ü§ó! Here are my socials: <a href="https://www.linkedin.com/in/james-jiang-87306b155/">LinkedIn</a>, <a href="https://twitter.com/jamesjg_">Twitter</a> and <a href="https://www.reddit.com/user/lovindata/">Reddit</a>. Otherwise, let's learn together in the next story ü´°! Bye ‚ù§Ô∏è.</p>







  
  



  


  



      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; <script>document.write(new Date().getFullYear())</script> James Jiang
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/lovindata" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/user/jamesjg/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/repositories/lovindata" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/jamesjg_" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/james-jiang-87306b155/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.reddit.com/user/lovindata/" target="_blank" rel="noopener" title="www.reddit.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 256C0 114.6 114.6 0 256 0s256 114.6 256 256-114.6 256-256 256H37.1c-13.7 0-20.5-16.5-10.9-26.2L75 437C28.7 390.7 0 326.7 0 256m349.6-102.4c23.6 0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6 0-37.8 14.6-41.8 34-34.5 3.7-61.4 33-61.4 68.4v.2c-37.5 1.6-71.8 12.3-99 29.1-10.1-7.8-22.8-12.5-36.5-12.5-33 0-59.8 26.8-59.8 59.8 0 24 14.1 44.6 34.4 54.1 2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54 0-33-26.8-59.8-59.8-59.8-13.7 0-26.3 4.6-36.4 12.4-27.4-17-62.1-27.7-100-29.1v-.2c0-25.4 18.9-46.5 43.4-49.9 4.4 18.8 21.3 32.8 41.5 32.8zm-172.5 93.3c16.7 0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6-31.4-8.8-30.4-30.5S160.3 247 177 247zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6 11.8-39.3 28.5-39.3 31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9.8-6.2 3.9-6.5 18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1.3 5.1 3.6 3.9 6.5"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://medium.com/@jamesjg" target="_blank" rel="noopener" title="medium.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262m288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tracking", "navigation.tabs", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>